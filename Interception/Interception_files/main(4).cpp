if ( 'prettyPrint' in window ) {} else {
    document.write( '<script type="text/javascript" src="http://gist-it.appspot.com/assets/prettify/prettify.js"></script>' );
}
document.write( '<link rel="stylesheet" href="http://gist-it.appspot.com/assets/embed.css"/>' );
document.write( '<link rel="stylesheet" href="http://gist-it.appspot.com/assets/prettify/prettify.css"/>' );
document.write( '<div class="gister-gist">\n<div class="gist-file">\n    <div class="gist-data">\n        <pre class="prettyprint">#include &lt;interception.h&gt;\n#include "utils.h"\n\n#include &lt;iostream&gt;\n\nenum ScanCode\n{\n    SCANCODE_ESC = 0x01\n};\n\nint main()\n{\n    using namespace std;\n\n    InterceptionContext context;\n    InterceptionDevice device;\n    InterceptionStroke stroke;\n\n    wchar_t hardware_id[500];\n\n    raise_process_priority();\n\n    context = interception_create_context();\n\n    interception_set_filter(context, interception_is_keyboard, INTERCEPTION_FILTER_KEY_DOWN | INTERCEPTION_FILTER_KEY_UP);\n    interception_set_filter(context, interception_is_mouse, INTERCEPTION_FILTER_MOUSE_LEFT_BUTTON_DOWN);\n\n    while(interception_receive(context, device = interception_wait(context), &amp;stroke, 1) &gt; 0)\n    {\n        if(interception_is_keyboard(device))\n        {\n            InterceptionKeyStroke &amp;keystroke = *(InterceptionKeyStroke *) &amp;stroke;\n            \n            if(keystroke.code == SCANCODE_ESC) break;\n        }\n\n        size_t length = interception_get_hardware_id(context, device, hardware_id, sizeof(hardware_id));\n\n        if(length &gt; 0 &amp;&amp; length &lt; sizeof(hardware_id))\n            wcout &lt;&lt; hardware_id &lt;&lt; endl;\n        \n        interception_send(context, device, &amp;stroke, 1);\n    }\n\n    interception_destroy_context(context);\n\n    return 0;\n}\n</pre>\n    </div>\n    <div class="gist-meta">\n        <span><a href="https://github.com/oblitum/Interception/blob/master/samples/hardwareid/main.cpp">This Gist</a> by <a href="http://gist-it.appspot.com">gist-it</a></span>\n        <span style="float: right; color: #369;"><a href="https://github.com/oblitum/Interception/raw/master/samples/hardwareid/main.cpp">view raw</a></span>\n        <span style="float: right; margin-right: 8px;">\n            <a style="color: rgb(102, 102, 102);" href="https://github.com/oblitum/Interception/blob/master/samples/hardwareid/main.cpp">samples/hardwareid/main.cpp</a></span>\n            <!-- Generated by: http://gist-it.appspot.com -->\n    </div>\n</div>\n</div>' );
document.write( '<script type="text/javascript">prettyPrint();</script>' );